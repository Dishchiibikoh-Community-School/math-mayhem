<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>MATH MAYHEM ‚Äî ViewBoard Mode</title>
    <meta name="description"
        content="ViewBoard whole-class mode for MATH MAYHEM. Teacher-controlled team battle on an interactive whiteboard.">
    <link rel="stylesheet" href="css/style.css">
    <style>
        body {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* ‚îÄ‚îÄ‚îÄ SETUP SCREEN ‚îÄ‚îÄ‚îÄ */
        #screen-setup {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 32px;
            gap: 28px;
        }

        .setup-header {
            text-align: center;
        }

        .setup-card {
            background: var(--surface);
            border: 1px solid var(--border);
            border-radius: var(--radius-lg);
            padding: 36px;
            width: 100%;
            max-width: 760px;
            box-shadow: var(--shadow);
        }

        .setup-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        @media(max-width:600px) {
            .setup-grid {
                grid-template-columns: 1fr;
            }
        }

        .team-entry {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .team-color-dot {
            width: 22px;
            height: 22px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .team-input {
            flex: 1;
        }

        /* ‚îÄ‚îÄ‚îÄ GAME SCREEN ‚îÄ‚îÄ‚îÄ */
        #screen-game {
            flex: 1;
            display: none;
            flex-direction: column;
            overflow: hidden;
        }

        /* Top bar */
        .vb-topbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 28px;
            background: var(--surface);
            border-bottom: 1px solid var(--border);
            flex-wrap: wrap;
            gap: 8px;
        }

        .vb-title {
            font-family: 'Bangers', cursive;
            font-size: 1.6rem;
            letter-spacing: 2px;
            color: var(--purple);
        }

        .vb-meta {
            display: flex;
            align-items: center;
            gap: 16px;
            font-size: 0.9rem;
            color: var(--muted);
        }

        .vb-round-badge {
            padding: 6px 18px;
            border-radius: 50px;
            background: linear-gradient(135deg, #7c3aed, #a855f7);
            font-family: 'Bangers', cursive;
            font-size: 1.1rem;
            letter-spacing: 1px;
        }

        /* Main layout: question area + scoreboard sidebar */
        .vb-main {
            display: flex;
            flex: 1;
            overflow: hidden;
            min-height: 0;
        }

        .vb-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 24px 28px;
            gap: 20px;
            overflow-y: auto;
        }

        .vb-sidebar {
            width: 280px;
            flex-shrink: 0;
            background: var(--surface);
            border-left: 1px solid var(--border);
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 14px;
            overflow-y: auto;
        }

        @media(max-width:1100px) {
            .vb-sidebar {
                width: 220px;
            }
        }

        /* Question card */
        .vb-question-card {
            background: var(--surface);
            border: 2px solid var(--purple);
            border-radius: var(--radius-lg);
            padding: 32px 36px;
            box-shadow: var(--glow-purple);
            text-align: center;
        }

        .vb-question-text {
            font-size: clamp(1.5rem, 3.5vw, 2.6rem);
            font-weight: 700;
            line-height: 1.3;
            background: linear-gradient(135deg, var(--white), var(--purple-glow));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .vb-timer-row {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 24px;
            margin-top: 8px;
        }

        .vb-timer-num {
            font-family: 'Bangers', cursive;
            font-size: 3.5rem;
            color: var(--gold);
            min-width: 60px;
            text-align: center;
            transition: color 0.3s;
        }

        .vb-timer-num.urgent {
            color: var(--red);
            animation: flamePulse 0.4s infinite alternate;
        }

        /* Answer grid */
        .vb-answers {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }

        .vb-ans-btn {
            padding: 24px 28px;
            border-radius: var(--radius-lg);
            border: 3px solid var(--border);
            background: var(--surface2);
            color: var(--white);
            font-size: clamp(1.1rem, 2.5vw, 1.6rem);
            font-weight: 700;
            cursor: pointer;
            transition: all 0.18s;
            text-align: left;
            display: flex;
            align-items: center;
            gap: 14px;
            min-height: 90px;
        }

        .vb-ans-btn:hover:not(:disabled):not(.revealed-correct):not(.revealed-wrong) {
            border-color: var(--cyan);
            background: rgba(6, 182, 212, 0.12);
            box-shadow: var(--glow-cyan);
            transform: scale(1.02);
        }

        .vb-ans-btn .letter {
            font-family: 'Bangers', cursive;
            font-size: 1.6rem;
            color: var(--muted);
            min-width: 32px;
        }

        .vb-ans-btn.revealed-correct {
            border-color: var(--green);
            background: rgba(34, 197, 94, 0.2);
            box-shadow: var(--glow-green);
            animation: correctPulse 0.5s ease;
        }

        .vb-ans-btn.revealed-wrong {
            border-color: var(--red);
            background: rgba(239, 68, 68, 0.12);
            animation: shake 0.4s ease;
        }

        .vb-ans-btn.disabled-q {
            opacity: 0.45;
            cursor: default;
        }

        /* Buzzer zone */
        .vb-buzz-zone {
            display: grid;
            gap: 14px;
            padding: 16px 20px;
            background: var(--surface);
            border-top: 1px solid var(--border);
            flex-shrink: 0;
        }

        .team-buzz-grid {
            display: grid;
            gap: 12px;
        }

        /* Sidebar team card */
        .vb-team-card {
            border-radius: var(--radius);
            padding: 14px 16px;
            border: 2px solid transparent;
            transition: all 0.3s;
            background: var(--surface2);
        }

        .vb-team-card.active {
            box-shadow: 0 0 16px rgba(255, 255, 255, 0.2);
        }

        .vb-team-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 6px;
        }

        .vb-team-dot {
            width: 14px;
            height: 14px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .vb-team-name {
            font-weight: 700;
            font-size: 0.95rem;
            flex: 1;
        }

        .vb-team-score {
            font-family: 'Bangers', cursive;
            font-size: 1.6rem;
        }

        .vb-team-streak {
            font-size: 0.8rem;
            color: var(--gold);
        }

        /* Powerup panel in sidebar */
        .pu-row {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
        }

        .pu-chip {
            padding: 4px 10px;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 700;
            background: var(--surface);
            border: 1px solid var(--border);
            cursor: pointer;
            transition: all 0.2s;
        }

        .pu-chip:hover {
            border-color: var(--gold);
            color: var(--gold);
        }

        .pu-chip.used {
            opacity: 0.3;
            cursor: default;
        }

        /* ‚îÄ‚îÄ‚îÄ INSTRUCTION MODAL ‚îÄ‚îÄ‚îÄ */
        .instr-modal {
            display: none;
            position: fixed;
            inset: 0;
            z-index: 9000;
            background: rgba(0, 0, 0, 0.82);
            backdrop-filter: blur(6px);
            align-items: center;
            justify-content: center;
            padding: 24px;
        }

        .instr-modal.open {
            display: flex;
        }

        .instr-box {
            background: var(--surface);
            border: 2px solid var(--purple);
            border-radius: var(--radius-lg);
            box-shadow: var(--glow-purple), var(--shadow);
            padding: 36px 40px;
            max-width: 720px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
        }

        .instr-title {
            font-family: 'Bangers', cursive;
            font-size: 2.2rem;
            letter-spacing: 3px;
            color: var(--gold);
            text-align: center;
            margin-bottom: 6px;
        }

        .instr-subtitle {
            text-align: center;
            color: var(--muted);
            font-size: 0.9rem;
            margin-bottom: 28px;
        }

        .instr-section {
            margin-bottom: 22px;
        }

        .instr-section h3 {
            font-family: 'Bangers', cursive;
            font-size: 1.25rem;
            letter-spacing: 2px;
            color: var(--cyan);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .instr-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.92rem;
        }

        .instr-table th {
            text-align: left;
            color: var(--muted);
            font-size: 0.78rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            padding: 6px 10px;
            border-bottom: 1px solid var(--border);
        }

        .instr-table td {
            padding: 8px 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            vertical-align: top;
        }

        .instr-table tr:last-child td {
            border-bottom: none;
        }

        .tip-box {
            background: rgba(251, 191, 36, 0.08);
            border-left: 3px solid var(--gold);
            border-radius: 0 var(--radius) var(--radius) 0;
            padding: 10px 16px;
            font-size: 0.9rem;
            color: var(--gold);
            margin-top: 12px;
        }

        /* ‚îÄ‚îÄ‚îÄ BONUS ROUND SCREEN ‚îÄ‚îÄ‚îÄ */
        #screen-bonus {
            display: none;
            flex: 1;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 32px;
            gap: 24px;
        }

        .bonus-title {
            font-family: 'Bangers', cursive;
            font-size: clamp(2.5rem, 7vw, 5rem);
            letter-spacing: 4px;
            text-align: center;
            color: var(--gold);
            text-shadow: 0 0 30px rgba(251, 191, 36, 0.8);
        }

        .bonus-sub {
            color: var(--muted);
            text-align: center;
            font-size: 1.1rem;
        }

        /* ‚îÄ‚îÄ‚îÄ END SCREEN ‚îÄ‚îÄ‚îÄ */
        #screen-end {
            display: none;
            flex: 1;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 32px;
            gap: 28px;
        }

        .end-title {
            font-family: 'Bangers', cursive;
            font-size: clamp(3rem, 8vw, 6rem);
            letter-spacing: 3px;
            text-align: center;
            background: linear-gradient(135deg, var(--gold), var(--purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Correct/Wrong overlay flash (full screen tint) */
        .answer-flash {
            position: fixed;
            inset: 0;
            z-index: 4000;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.15s;
        }

        .answer-flash.correct {
            background: rgba(34, 197, 94, 0.15);
            opacity: 1;
        }

        .answer-flash.wrong {
            background: rgba(239, 68, 68, 0.12);
            opacity: 1;
        }

        /* Buzzer pressed indicator */
        .buzz-indicator {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 3500;
            text-align: center;
            pointer-events: none;
            display: none;
        }

        .buzz-indicator.show {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            animation: slideUp 0.3s ease;
        }

        .buzz-indicator .team-name-big {
            font-family: 'Bangers', cursive;
            font-size: clamp(2rem, 7vw, 4.5rem);
            letter-spacing: 3px;
        }

        .buzz-indicator .buzz-word {
            font-size: clamp(1rem, 3vw, 1.8rem);
            color: var(--muted);
        }
    </style>
</head>

<body>

    <div class="stars-bg" id="stars"></div>
    <div class="answer-flash" id="answer-flash"></div>
    <div class="buzz-indicator" id="buzz-indicator">
        <div class="buzz-word">üîî BUZZED IN!</div>
        <div class="team-name-big" id="buzz-team-name">Team Alpha</div>
    </div>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SCREEN 1: SETUP
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <section id="screen-setup">
        <div class="setup-header">
            <div style="font-family:'Bangers',cursive;font-size:clamp(2rem,6vw,4.5rem);letter-spacing:3px;"
                class="glow-purple">‚ö° MATH MAYHEM</div>
            <div style="font-family:'Bangers',cursive;font-size:1.2rem;color:var(--muted);letter-spacing:4px;">VIEWBOARD
                MODE ‚Äî TEACHER SETUP</div>
        </div>

        <div class="setup-card">
            <div class="setup-grid">
                <!-- Left column -->
                <div style="display:flex;flex-direction:column;gap:20px;">
                    <div>
                        <label class="label">üìö Math Topic</label>
                        <select class="select-field" id="setup-topic">
                            <option value="all">üåÄ All Topics (Mixed)</option>
                            <option value="addition">‚ûï Addition &amp; Subtraction</option>
                            <option value="multiplication">‚úñÔ∏è Multiplication &amp; Division</option>
                            <option value="fractions">üçï Fractions</option>
                            <option value="decimals">üíß Decimals</option>
                            <option value="algebra">üî¢ Algebra</option>
                            <option value="geometry">üìê Geometry</option>
                            <option value="word_problems">üìñ Word Problems</option>
                        </select>
                    </div>
                    <div>
                        <label class="label">‚≠ê Difficulty Level</label>
                        <select class="select-field" id="setup-level">
                            <option value="1">‚≠ê Rookie (Grade 4)</option>
                            <option value="2" selected>‚≠ê‚≠ê Challenger (Grade 5‚Äì6)</option>
                            <option value="3">‚≠ê‚≠ê‚≠ê Elite (Grade 7‚Äì8)</option>
                            <option value="4">üí• MAYHEM (All Mixed, Hardest)</option>
                        </select>
                    </div>
                    <div>
                        <label class="label">‚ùì Questions per Round</label>
                        <select class="select-field" id="setup-qcount">
                            <option value="5">5 questions (Quick)</option>
                            <option value="10" selected>10 questions (Standard)</option>
                            <option value="15">15 questions (Extended)</option>
                        </select>
                    </div>
                    <div>
                        <label class="label">‚è±Ô∏è Time per Question</label>
                        <select class="select-field" id="setup-time">
                            <option value="10">10 seconds (Fast)</option>
                            <option value="20" selected>20 seconds (Standard)</option>
                            <option value="30">30 seconds (Easy)</option>
                        </select>
                    </div>
                </div>

                <!-- Right column: teams -->
                <div style="display:flex;flex-direction:column;gap:16px;">
                    <div>
                        <label class="label">üë• Number of Teams</label>
                        <select class="select-field" id="setup-teams" onchange="updateTeamFields()">
                            <option value="2" selected>2 Teams</option>
                            <option value="3">3 Teams</option>
                            <option value="4">4 Teams</option>
                            <option value="5">5 Teams</option>
                            <option value="6">6 Teams</option>
                        </select>
                    </div>
                    <div id="team-name-fields" style="display:flex;flex-direction:column;gap:10px;"></div>
                </div>
            </div>

            <hr class="neon-divider" style="margin:28px 0 24px;">
            <div style="text-align:center;display:flex;flex-direction:column;align-items:center;gap:12px;">
                <button class="btn btn-purple btn-lg" id="btn-start-game" onclick="startGame()">
                    üöÄ Launch Game!
                </button>
                <button class="btn btn-ghost" style="padding:10px 24px;"
                    onclick="document.getElementById('instr-modal').classList.add('open')">
                    üìñ Teacher Instructions
                </button>
                <a href="index.html" style="font-size:0.85rem;color:var(--muted);">‚Üê Back to Mode Select</a>
            </div>
        </div>
    </section>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SCREEN 2: GAME
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <section id="screen-game">
        <!-- Top bar -->
        <div class="vb-topbar">
            <div class="vb-title">‚ö° MATH MAYHEM</div>
            <div class="vb-meta">
                <span id="vb-qnum">Q 1/10</span>
                <span id="vb-round-badge" class="vb-round-badge">Round 1</span>
                <span id="vb-topic-badge" class="pill" style="border-color:var(--cyan);color:var(--cyan);">All
                    Topics</span>
            </div>
            <div style="display:flex;gap:10px;">
                <button class="btn btn-ghost" style="padding:8px 16px;font-size:0.85rem;" onclick="showBonusRound()">üé°
                    Bonus Round</button>
                <button class="btn btn-ghost" style="padding:8px 16px;font-size:0.85rem;" onclick="endGame()">üèÅ End
                    Game</button>
            </div>
        </div>

        <!-- Main area -->
        <div class="vb-main">
            <!-- Question + answers -->
            <div class="vb-content">
                <!-- Question -->
                <div class="vb-question-card">
                    <div class="vb-timer-row">
                        <div id="vb-timer" class="vb-timer-num">20</div>
                        <div style="flex:1;">
                            <div id="vb-q-text" class="vb-question-text">Loading question...</div>
                        </div>
                    </div>
                    <div class="progress-bar mt-4" style="max-width:100%;">
                        <div class="progress-fill" id="vb-timer-bar" style="width:100%;"></div>
                    </div>
                </div>

                <!-- Answers grid -->
                <div class="vb-answers" id="vb-answers"></div>

                <!-- Active team indicator -->
                <div id="vb-active-team-bar"
                    style="display:none;padding:14px 24px;border-radius:var(--radius);text-align:center;font-weight:700;font-size:1.2rem;">
                    üîî Waiting for <span id="vb-active-team-name">Team Alpha</span> to answer‚Ä¶
                </div>

                <!-- Next / Skip buttons -->
                <div style="display:flex;gap:14px;justify-content:center;">
                    <button class="btn btn-green btn-lg" id="btn-reveal" onclick="revealAnswer()" disabled>
                        üëÅÔ∏è Reveal Answer
                    </button>
                    <button class="btn btn-cyan btn-lg" id="btn-next" onclick="nextQuestion()" disabled>
                        Next ‚û°
                    </button>
                </div>
            </div>

            <!-- Sidebar scoreboard -->
            <aside class="vb-sidebar">
                <div style="font-family:'Bangers',cursive;font-size:1.2rem;letter-spacing:2px;color:var(--muted);">
                    SCOREBOARD</div>
                <div id="vb-teams-sidebar" style="display:flex;flex-direction:column;gap:10px;"></div>
                <hr class="neon-divider" style="margin:8px 0;">
                <div style="font-family:'Bangers',cursive;font-size:1rem;letter-spacing:2px;color:var(--muted);">
                    POWER-UPS</div>
                <div id="vb-powerup-panel" style="display:flex;flex-direction:column;gap:8px;"></div>
            </aside>
        </div>

        <!-- Buzzer zone (bottom strip) -->
        <div class="vb-buzz-zone">
            <div
                style="font-family:'Bangers',cursive;text-align:center;font-size:1rem;letter-spacing:3px;color:var(--muted);">
                TAP TO BUZZ IN!</div>
            <div class="team-buzz-grid" id="team-buzz-grid"></div>
        </div>
    </section>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SCREEN 3: BONUS ROUND
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <section id="screen-bonus">
        <div class="bonus-title" id="bonus-title">‚ö° LIGHTNING ROUND!</div>
        <div class="bonus-sub" id="bonus-sub">10 questions ‚Äî 5 seconds each. First to buzz in wins the point!</div>
        <div id="bonus-content" style="width:100%;max-width:700px;display:flex;flex-direction:column;gap:20px;">
            <!-- filled by JS -->
        </div>
        <button class="btn btn-gold btn-lg" onclick="exitBonus()">Done ‚Üí Back to Game</button>
    </section>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SCREEN 4: END / PODIUM
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <section id="screen-end">
        <div class="end-title">üèÜ GAME OVER!</div>
        <div id="end-podium" class="podium-wrap"></div>
        <div id="end-lb" class="scroll-list" style="width:100%;max-width:560px;"></div>
        <div style="display:flex;gap:16px;flex-wrap:wrap;justify-content:center;">
            <button class="btn btn-purple btn-lg" onclick="location.href='viewboard.html'">üîÑ Play Again</button>
            <button class="btn btn-ghost btn-lg" onclick="location.href='index.html'">üè† Home</button>
        </div>
    </section>

    <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     TEACHER INSTRUCTIONS MODAL
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
    <div class="instr-modal" id="instr-modal">
        <div class="instr-box">
            <div class="instr-title">üìñ TEACHER GUIDE</div>
            <div class="instr-subtitle">ViewBoard Mode ‚Äî Whole-Class Team Battle</div>

            <div class="instr-section">
                <h3>üõ†Ô∏è SETUP</h3>
                <table class="instr-table">
                    <tr>
                        <th>Setting</th>
                        <th>What it does</th>
                    </tr>
                    <tr>
                        <td><strong>Topic</strong></td>
                        <td>Pick one subject or mix all topics for variety.</td>
                    </tr>
                    <tr>
                        <td><strong>Difficulty</strong></td>
                        <td>‚≠ê Rookie = Gr 4 ¬∑ ‚≠ê‚≠ê Challenger = Gr 5‚Äì6 ¬∑ ‚≠ê‚≠ê‚≠ê Elite = Gr 7‚Äì8 ¬∑ üí• MAYHEM = All mixed</td>
                    </tr>
                    <tr>
                        <td><strong>Questions</strong></td>
                        <td>5 (quick warm-up), 10 (standard class game), 15 (full lesson).</td>
                    </tr>
                    <tr>
                        <td><strong>Timer</strong></td>
                        <td>10s = fast-paced, 20s = standard, 30s = relaxed / discussion time.</td>
                    </tr>
                    <tr>
                        <td><strong>Teams</strong></td>
                        <td>2‚Äì6 teams. Name them by table group, row, or house colour.</td>
                    </tr>
                </table>
            </div>

            <div class="instr-section">
                <h3>üéÆ GAMEPLAY LOOP</h3>
                <table class="instr-table">
                    <tr>
                        <th>Step</th>
                        <th>What happens</th>
                    </tr>
                    <tr>
                        <td>1. Question appears</td>
                        <td>Timer counts down on screen. Students discuss in their team.</td>
                    </tr>
                    <tr>
                        <td>2. Team buzzes in</td>
                        <td>One student taps their team's <strong>coloured buzzer button</strong> at the bottom of the
                            screen.</td>
                    </tr>
                    <tr>
                        <td>3. Team answers</td>
                        <td>Tap one of the four answer tiles (A/B/C/D). Wrong answer = other teams can buzz in on
                            reduced time.</td>
                    </tr>
                    <tr>
                        <td>4. Result</td>
                        <td>Green glow = correct (+points). Red shake = wrong. Correct answer always stays highlighted.
                        </td>
                    </tr>
                    <tr>
                        <td>5. Next question</td>
                        <td>Press <strong>Next ‚û°</strong> to advance. Press <strong>üëÅÔ∏è Reveal Answer</strong> if time
                            runs out with no correct buzz.</td>
                    </tr>
                </table>
                <div class="tip-box">üí° <strong>Tip:</strong> Let the whole team discuss before a student buzzes in ‚Äî
                    encourages collaboration!</div>
            </div>

            <div class="instr-section">
                <h3>üìä SCORING</h3>
                <table class="instr-table">
                    <tr>
                        <th>Event</th>
                        <th>Points</th>
                    </tr>
                    <tr>
                        <td>Correct answer</td>
                        <td>100 base pts</td>
                    </tr>
                    <tr>
                        <td>Speed bonus (answer quickly)</td>
                        <td>Up to +50 pts</td>
                    </tr>
                    <tr>
                        <td>3-answer streak üî•</td>
                        <td>√ó1.5 multiplier</td>
                    </tr>
                    <tr>
                        <td>5-answer streak üî•üî•</td>
                        <td>√ó2.0 multiplier (team is ON FIRE!)</td>
                    </tr>
                    <tr>
                        <td>Bonus round win</td>
                        <td>250 pts</td>
                    </tr>
                </table>
            </div>

            <div class="instr-section">
                <h3>‚ö° POWER-UPS <span
                        style="font-size:0.85rem;color:var(--muted);font-family:Inter,sans-serif;font-weight:400;">(Teams
                        start with 1 each)</span></h3>
                <table class="instr-table">
                    <tr>
                        <th>Power-up</th>
                        <th>Effect</th>
                        <th>How to use</th>
                    </tr>
                    <tr>
                        <td>üõ°Ô∏è Shield</td>
                        <td>Absorbs a wrong answer ‚Äî team doesn't lose their turn</td>
                        <td>Tap chip in sidebar before the answer</td>
                    </tr>
                    <tr>
                        <td>‚ö° Double Points</td>
                        <td>Next correct answer scores 2√ó points</td>
                        <td>Tap chip before answering</td>
                    </tr>
                    <tr>
                        <td>‚ùÑÔ∏è Freeze</td>
                        <td>Pauses the timer for 5 seconds</td>
                        <td>Tap chip while timer is running</td>
                    </tr>
                    <tr>
                        <td>üí£ Bomb</td>
                        <td>Eliminates 2 wrong answers from the screen</td>
                        <td>Tap chip ‚Äî two wrong options grey out</td>
                    </tr>
                    <tr>
                        <td>üåÄ Chaos Card</td>
                        <td>Steals 50 points from the leading team</td>
                        <td>Tap chip ‚Äî happens instantly</td>
                    </tr>
                </table>
                <div class="tip-box">üí° <strong>Tip:</strong> Power-ups are shown in the sidebar under each team name.
                    Only you (the teacher) can activate them ‚Äî a great tool for balancing the game!</div>
            </div>

            <div class="instr-section">
                <h3>üé° BONUS ROUNDS <span
                        style="font-size:0.85rem;color:var(--muted);font-family:Inter,sans-serif;font-weight:400;">(optional
                        ‚Äî trigger anytime)</span></h3>
                <table class="instr-table">
                    <tr>
                        <th>Round</th>
                        <th>How it works</th>
                    </tr>
                    <tr>
                        <td>‚ö° Lightning Round</td>
                        <td>10 rapid-fire questions appear one by one. First team to buzz wins the point for each.</td>
                    </tr>
                    <tr>
                        <td>‚öîÔ∏è Math Duel</td>
                        <td>Pick one champion from each of two teams. They race to answer a single question first.</td>
                    </tr>
                    <tr>
                        <td>üé° Spin the Wheel</td>
                        <td>The animated wheel lands on a random topic ‚Äî then play one question from that topic.</td>
                    </tr>
                    <tr>
                        <td>üé≠ Mystery Math</td>
                        <td>Answer labels are hidden (???) for 3 seconds before being revealed ‚Äî adds suspense!</td>
                    </tr>
                </table>
                <div class="tip-box">üí° <strong>Tip:</strong> Trigger a Bonus Round mid-game using the <strong>üé° Bonus
                        Round</strong> button in the top bar ‚Äî great for re-energising the class!</div>
            </div>

            <div class="instr-section">
                <h3>üèÅ ENDING THE GAME</h3>
                <p style="color:var(--muted);font-size:0.92rem;line-height:1.7;">Click <strong
                        style="color:var(--white);">üèÅ End Game</strong> in the top bar at any time to jump to the
                    podium screen. The top 3 teams appear on an animated ü•áü•àü•â podium and all scores are saved to local
                    storage for bragging rights!</p>
            </div>

            <div style="text-align:center;margin-top:8px;">
                <button class="btn btn-purple btn-lg"
                    onclick="document.getElementById('instr-modal').classList.remove('open')">
                    Got it ‚Äî Let's Play! üöÄ
                </button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/questions.js"></script>
    <script src="js/engine.js"></script>
    <script src="js/sounds.js"></script>
    <script src="js/confetti.js"></script>
    <script src="js/viewboard.js"></script>
    <script>
        // Generate stars
        const starsBg = document.getElementById('stars');
        for (let i = 0; i < 80; i++) {
            const s = document.createElement('div'); s.className = 'star-dot';
            const sz = Math.random() * 2 + 0.5;
            Object.assign(s.style, { width: sz + 'px', height: sz + 'px', left: Math.random() * 100 + '%', top: Math.random() * 100 + '%', animationDelay: Math.random() * 3 + 's', animationDuration: (2 + Math.random() * 3) + 's' });
            starsBg.appendChild(s);
        }
        // Init team fields on load
        updateTeamFields();
    </script>
</body>

</html>